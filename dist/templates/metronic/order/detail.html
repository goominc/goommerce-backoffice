<div class="page-head">
  <div class="container">
    <div id="contentTitle"></div> <!-- commonly initialized -->
  </div>
</div>
<div class="page-content">
  <div class="container">
    <div id="breadcrumb"></div> <!-- commonly initialized -->
    <div class="page-content-inner">
      <div class="row">
        <div class="col-md-12">
          <div class="portlet light">
            <div class="portlet-title">
              {{order.id}}
            </div>
            <div class="portlet-body">
              <div class="row">
                <div class="col-md-4">
                  <div class="portlet yellow-crusta box">
                    <div class="portlet-title">
                      <div class="caption">
                        <i class="fa fa-cogs"></i>Order Details
                      </div>
                    </div>
                    <div class="portlet-body">
                      <div class="row static-info">
                        <div class="col-md-5 name">
                          Order #:
                        </div>
                        <div class="col-md-7 value">
                          {{order.id}} <!--span class="label label-info label-sm">Email confirmation was sent </span-->
                        </div>
                      </div>
                      <div class="row static-info">
                        <div class="col-md-5 name">
                          Order Time:
                        </div>
                        <div class="col-md-7 value">
                          {{order.createdAt}}
                        </div>
                      </div>
                      <div class="row static-info">
                        <div class="col-md-5 name">
                          Order Status:
                        </div>
                        <div class="col-md-7 value">
                          <span class="label label-success">{{order.status}}</span>
                        </div>
                      </div>
                      <div class="row static-info">
                        <div class="col-md-5 name">
                          Payment Status:
                        </div>
                        <div class="col-md-7 value">
                          <span class="label label-success">{{order.paymentStatus}}</span>
                        </div>
                      </div>
                      <div class="row static-info">
                        <div class="col-md-5 name">
                          subtotal:
                        </div>
                        <div class="col-md-7 value">
                          KRW {{order.subtotalKRW}}
                        </div>
                      </div>
                      <div class="row static-info">
                        <div class="col-md-5 name">
                          tax:
                        </div>
                        <div class="col-md-7 value">
                          KRW {{order.taxKRW}}
                        </div>
                      </div>
                      <div class="row static-info">
                        <div class="col-md-5 name">
                          handling fee:
                        </div>
                        <div class="col-md-7 value">
                          KRW {{order.handlingFeeKRW}}
                        </div>
                      </div>
                      <div class="row static-info">
                        <div class="col-md-5 name">
                          shipping cost:
                        </div>
                        <div class="col-md-7 value">
                          KRW {{order.shippingCostKRW}}
                        </div>
                      </div>
                      <div class="row static-info">
                        <div class="col-md-5 name">
                          total:
                        </div>
                        <div class="col-md-7 value">
                          KRW {{order.totalKRW}}
                        </div>
                      </div>
                      <div class="row static-info">
                        <div class="col-md-5 name">
                          totalPaid:
                        </div>
                        <div class="col-md-7 value">
                          KRW {{order.totalPaid.amount}}
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
                <div class="col-md-4">
                  <div class="portlet blue-hoki box">
                    <div class="portlet-title">
                      <div class="caption">
                        <i class="fa fa-cogs"></i>Customer Information
                      </div>
                    </div>
                    <div class="portlet-body">
                      <div class="row static-info">
                        <div class="col-md-5 name">
                          Customer Name:
                        </div>
                        <div class="col-md-7 value">
                          {{user.name}}
                        </div>
                      </div>
                      <div class="row static-info">
                        <div class="col-md-5 name">
                          Email:
                        </div>
                        <div class="col-md-7 value">
                          {{user.email}}
                        </div>
                      </div>
                      <div class="row static-info">
                        <div class="col-md-5 name">
                          Biz Number:
                        </div>
                        <div class="col-md-7 value">
                          111-00-22222
                        </div>
                      </div>
                      <div class="row static-info">
                        <div class="col-md-5 name">
                          Phone Number:
                        </div>
                        <div class="col-md-7 value">
                          01012345678
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
                <div class="col-md-4">
                  <div class="portlet red-sunglo box">
                    <div class="portlet-title">
                      <div class="caption">
                        <i class="fa fa-cogs"></i>Shipping Address
                      </div>
                    </div>
                    <div class="portlet-body">
                      <div class="row static-info">
                        <div class="col-md-12 value">
                          <div data-ng-repeat="field in addressFields">{{field.title}}: {{field.obj}}</div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
                <div class="col-md-12">
                  <div class="portlet grey-cascade box">
                    <div class="portlet-title">
                      <div class="caption">
                        <i class="fa fa-cogs"></i>Payments
                      </div>
                    </div>
                    <div class="portlet-body">
                      <div class="table-responsive">
                        <table class="table table-hover table-bordered table-striped">
                          <thead>
                          <tr>
                            <th width="10%">ID</th>
                            <th width="10%">Parent ID</th>
                            <th width="30%">TID</th>
                            <th width="10%">Type</th>
                            <th width="10%">Total</th>
                            <th width="10%">Currency</th>
                            <th width="5%">Method</th>
                            <th width="5%">Status</th>
                            <th width="10%"></th>
                          </tr>
                          </thead>
                          <tbody class="cell-center">
                          <tr data-ng-repeat="row in order.payments">
                            <td>
                              {{row.id}}
                            </td>
                            <td>
                              {{row.parentId}}
                            </td>
                            <td>
                              {{row.tid}}
                            </td>
                            <td>
                              {{row.type}}
                            </td>
                            <td>
                              <div ng-if="row.type === 0">
                                {{row.data.TotPrice}}
                              </div>
                              <div ng-if="row.type === 2">
                                {{row.data.PRTC_Price}}
                              </div>
                            </td>
                            <td>
                              {{row.data.currency}}
                            </td>
                            <td>
                              {{row.data.payMethod}}
                            </td>
                            <td>
                              {{row.status}}
                            </td>
                            <td>
                              <div ng-if="row.type === 0">
                                <button class="btn blue" data-ng-click="popupRefund(row)">
                                  <i class="fa fa-eject"></i> Refund
                                </button>
                              </div>
                            </td>
                          </tr>
                          </tbody>
                        </table>
                      </div>
                    </div>
                  </div>
                </div>
                <div class="col-md-12">
                  <div class="portlet grey-cascade box">
                    <div class="portlet-title">
                      <div class="caption">
                        <i class="fa fa-cogs"></i>Shopping Cart
                      </div>
                    </div>
                    <div class="portlet-body">
                      <div class="table-responsive">
                        <table class="table table-hover table-bordered table-striped">
                          <thead>
                          <tr>
                            <th width="20%">상품ID</th>
                            <th width="20%">상품</th>
                            <th width="15%">Original Price</th>
                            <th width="15%">Price</th>
                            <th width="10%">Quantity</th>
                            <th width="10%">Total</th>
                            <th width="10%">Status</th>
                          </tr>
                          </thead>
                          <tbody class="cell-center">
                          <tr data-ng-repeat="row in order.orderProducts">
                            <td>
                              <a href="/products/{{row.product.id}}" target="_blank">{{row.product.id}}</a>
                            </td>
                            <td>
                              {{row.productVariant.sku}}
                            </td>
                            <td>
                              <span>{{row.productVariant.KRW}} KRW</span>
                            </td>
                            <td>
                              <span>{{row.productVariant.KRW}} KRW</span>
                            </td>
                            <td>
                              {{row.quantity}}
                            </td>
                            <td>
                              {{row.totalKRW}}
                            </td>
                            <td>
                              {{row.status}}
                            </td>
                          </tr>
                          </tbody>
                        </table>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<div class="modal fade" id="order_refund_modal">
  <div class="modal-dialog">
    <div class="modal-content">
      <form data-ng-submit="refund(refundAmount)">
        <div class="modal-header">
          {{'order.detail.refundTitle' | translate}}
        </div>
        <div class="modal-body">
          <div class="row">
            <div class="col-md-12 form-group">
              <label class="control-label">환불 가능 금액: {{refundPayment.data.TotPrice}} </label>
              <input class="form-control" type="number" min="1" max="{{refundPayment.data.TotPrice || 1}}" data-ng-model="refundAmount" placeholder="환불 금액을 입력하세요" />
            </div>
          </div>
        </div>
        <div class="modal-footer">
          <button class="btn default" type="reset" data-ng-click="closePopup()">{{'main.closeButton' | translate}}</button>
          <button class="btn blue" type="submit"><i class="fa fa-plus"></i> {{'main.saveButton' | translate}}</button>
        </div>
      </form>
    </div>
  </div>
</div>
